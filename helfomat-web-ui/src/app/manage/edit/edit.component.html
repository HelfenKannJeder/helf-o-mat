<div *ngIf="organisation | async; let organisation; else loading">
    <div class="custom-content">
        <div class="logo-container" *ngIf="organisation.pictures.length > 0">
            <div class="logo">
                <img src="api/picture/{{organisation.logo.value}}/icon"
                     [attr.alt]="organisation.name">
            </div>
            <img src="api/picture/{{organisation.pictures[0].value}}/teaser" width="100%"/>
        </div>
    </div>

    <div class="col-md-8">
        <h1>TODO Edit: {{organisation.name}}</h1>
        <div class="form-group">
            <label for="name">TODO Name:</label>
            <input type="text" id="name" name="name" class="form-control" [(ngModel)]="organisation.name"/>
        </div>
        <div class="form-group">
            <label for="website">TODO Website:</label>
            <input type="text" id="website" name="website" class="form-control" [(ngModel)]="organisation.website"/>
        </div>
        <div class="form-group">
            <label for="description">TODO Description:</label>
            <textarea class="form-control" id="description" name="description" autosize [(ngModel)]="organisation.description"></textarea>
        </div>

        <div>
            <h2>{{'organisation.attendanceTime.title' | translate}}</h2>
            <div *ngFor="let attendanceTime of organisation.attendanceTimes">
                <h4>
                    {{'organisation.attendanceTime.weekday.' + attendanceTime.day | translate}},
                    {{attendanceTime.start | time}}-{{attendanceTime.end | time}}
                    {{'organisation.attendanceTime.clock' | translate}}
                </h4>
                <div class="form-group">
                    <label for="weekday">TODO: Weekday:</label>
                    <select class="form-control" name="weekday" id="weekday" [(ngModel)]="attendanceTime.day"></select>
                </div>
                <div class="form-group">
                    <label for="weekday">TODO: Time:</label>

                </div>

                <div class="form-group">
                    <label for="attandanceTimeGroups">{{'organisation.attendanceTime.groups' | translate}}</label>
                    {{attendanceTime.groups}}
                </div>
                <div class="form-group">
                    <label for="note">{{'organisation.attendanceTime.note' | translate}}</label>
                    <textarea class="form-control" name="note" id="note" autosize [(ngModel)]="attendanceTime.note"></textarea>
                </div>
            </div>
        </div>

        <h2>{{'organisation.group.title' | translate}}</h2>
        <div cdkDropList (cdkDropListDropped)="drop(organisation.groups, $event)">
            <div *ngFor="let group of organisation.groups" class="panel panel-default dragable" cdkDrag>
                <div class="panel-heading" (click)="group.__collapsed = !group.__collapsed">
                    <button class="pull-right btn btn-danger btn-xs">
                        <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                    </button>
                    <a class="glyphicon {{ group.__collapsed ? 'glyphicon-collapse-down' : 'glyphicon-expand' }}" aria-hidden="true"></a>
                    TODO Group: {{group.name}}
                </div>
                <div class="panel-body" *ngIf="group.__collapsed">
                    <div class="form-group">
                        <label for="groupName">TODO Name:</label>
                        <input type="text" id="groupName" name="groupName" class="form-control" [(ngModel)]="group.name"/>
                    </div>
                    <div class="form-group">
                        <label for="groupDescription">TODO Description:</label>
                        <textarea class="form-control" id="groupDescription" name="groupDescription" autosize [(ngModel)]="group.description"></textarea>
                    </div>
                </div>
            </div>

        </div>
    </div>
    <div class="col-md-4">
        <div class="row">
            <div class="panel panel-default" *ngIf="organisation.addresses.length > 0">
                <div class="panel-heading">
                    {{organisation.addresses.length | i18nPlural: {
                    '=1': 'organisation.address.title',
                    'other': 'organisation.address.titlePlural'
                } | translate}}
                </div>
                <!--                <helfomat-map-->
                <!--                    [organisations]="organisations"-->
                <!--                    [position]="position"-->
                <!--                    [distance]="distance"-->
                <!--                    [center]="center"-->
                <!--                    [zoom]="zoom"-->
                <!--                    [allowUpdatePosition]="false"-->
                <!--                    [showMapResizeButton]="false"></helfomat-map>-->
                <!--                <ul class="list-group">-->
                <!--                    <li *ngFor="let address of organisation.addresses" class="list-group-item"-->
                <!--                        [ngClass]="{'list-group-item-info': areAddressesEqual(organisation.defaultAddress, address)}">-->
                <!--                        <strong *ngIf="address.addressAppendix">{{address.addressAppendix}}<br/></strong>-->
                <!--                        {{address.street}}, {{address.zipcode}} {{address.city}}<br/>-->
                <!--                        <span-->
                <!--                            *ngIf="address.telephone">{{'organisation.address.telephone' | translate}}: {{address.telephone}}</span>-->
                <!--                    </li>-->
                <!--                </ul>-->
            </div>

            <div class="panel panel-default" *ngIf="organisation.contactPersons.length > 0">
                <div class="panel-heading">
                    {{'organisation.contact.title' | translate}}
                </div>
                <div class="panel-body">
                    <div *ngFor="let contactPerson of organisation.contactPersons" class="row">
                        <div class="col-sm-2" *ngIf="contactPerson.picture">
                            <div class="row">
                                <img src="api/picture/{{contactPerson.picture.value}}/icon"
                                     width="100%"
                                     alt="{{contactPerson.firstname}} {{contactPerson.lastname}}"/>
                            </div>
                        </div>
                        <div class="col-sm-10">
                            <h4>{{contactPerson.firstname}} {{contactPerson.lastname}}</h4>
                            <p>
                                <span *ngIf="contactPerson.rank">({{contactPerson.rank}})<br/></span>
                                <span *ngIf="contactPerson.telephone">{{'organisation.contact.telephone' | translate}}
                                    {{contactPerson.telephone}}<br/></span>
                                <span *ngIf="contactPerson.mail">{{'organisation.contact.mail' | translate}}
                                    {{contactPerson.mail}}<br/></span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!--            <ng-template #backLink>-->
            <!--                <div class="panel panel-default">-->
            <!--                    <div class="panel-heading">-->
            <!--                        {{'organisation.facts.helfomatResult.backToOverviewTitle' | translate}}-->
            <!--                    </div>-->
            <!--                    <div class="panel-body">-->
            <!--                        <button class="btn btn-default" (click)="_back$.next()">-->
            <!--                            {{'organisation.facts.helfomatResult.back' | translate}}-->
            <!--                        </button>-->
            <!--                    </div>-->
            <!--                </div>-->
            <!--            </ng-template>-->

            <div class="panel panel-default" *ngIf="organisation.pictures.length > 1">
                <div class="panel-heading">
                    {{'organisation.pictures.title' | translate}}
                </div>
                <img src="api/picture/{{picture.value}}/medium" width="100%"
                     *ngFor="let picture of organisation.pictures.slice(1)"/>
            </div>

        </div>
    </div>

</div>

<ng-template #loading>{{'organisation.dataLoading' | translate}}</ng-template>